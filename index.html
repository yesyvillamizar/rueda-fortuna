<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Rueda de la Prevención</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      background-color: #004d66;
      font-family: sans-serif;
      margin: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    canvas {
      margin-top: 2rem;
      border-radius: 50%;
    }
    #pointer {
      position: absolute;
      top: 90px;
      left: calc(50% - 20px);
      z-index: 10;
    }
    #spin {
      margin-top: 2rem;
      padding: 1rem 2rem;
      font-size: 1.2rem;
      background-color: #10b981;
      color: white;
      border: none;
      border-radius: 10px;
      cursor: pointer;
    }
    #result, #options {
      margin-top: 1rem;
      color: white;
      text-align: center;
    }
    .option-btn {
      display: block;
      margin: 0.5rem auto;
      padding: 0.5rem 1rem;
      font-size: 1rem;
      border-radius: 5px;
      border: none;
      background-color: #e5e7eb;
    }
  </style>
</head>
<body>
  <h1 style="color:white; margin-top:1rem;">Rueda de la Prevención</h1>
  <div id="pointer">
    <svg width="40" height="40">
      <polygon points="0,0 40,0 20,40" style="fill:purple;" />
    </svg>
  </div>
  <canvas id="wheel" width="400" height="400"></canvas>
  <button id="spin">Girar</button>
  <div id="result"></div>
  <div id="options"></div>

  <audio id="win-sound" src="https://www.soundjay.com/human/sounds/applause-8.mp3"></audio>
  <audio id="error-sound" src="https://www.fesliyanstudios.com/play-mp3/6763"></audio>

  <script>
    const temas = [{"tema": "Cibernético", "color": "#f2542d"}, {"tema": "Sexual", "color": "#e63946"}, {"tema": "Drogas", "color": "#f77f00"}, {"tema": "Maltrato", "color": "#fcbf49"}, {"tema": "Convivencia", "color": "#2a9d8f"}, {"tema": "Penal", "color": "#90e0ef"}, {"tema": "Grooming", "color": "#9d4edd"}, {"tema": "Responsabilidad", "color": "#0077b6"}];
    const preguntas = [
  { "tema": "Convivencia", "pregunta": "¿Qué busca el Código de Convivencia?", "opciones": ["A. Reprimir", "B. Educar y prevenir", "C. Sancionar con cárcel", "D. Controlar redes sociales"], "correcta": "B. Educar y prevenir" },
  { "tema": "Grooming", "pregunta": "¿Qué es el grooming?", "opciones": ["A. Ciberacoso sexual por adultos a menores", "B. Troleo en redes", "C. Juegos en línea", "D. Denuncias falsas"], "correcta": "A. Ciberacoso sexual por adultos a menores" },
  { "tema": "Grooming", "pregunta": "¿Qué hacer si un extraño te pide fotos íntimas en redes?", "opciones": ["A. Enviarlas", "B. Ignorar", "C. Denunciar y bloquear", "D. Preguntar a otros"], "correcta": "C. Denunciar y bloquear" },
  { "tema": "Grooming", "pregunta": "¿Qué señales indican grooming?", "opciones": ["A. Regalos y secretos", "B. Juegos públicos", "C. Clases escolares", "D. Videos educativos"], "correcta": "A. Regalos y secretos" },
  { "tema": "Grooming", "pregunta": "¿Qué entidades ayudan si hay grooming?", "opciones": ["A. Policía de Infancia", "Fiscalía e ICBF", "B. YouTube", "C. Colegio", "D. ChatGPT"], "correcta": "A. Policía de Infancia, Fiscalía e ICBF" },
  { "tema": "Cibernético", "pregunta": "¿Qué es ciberacoso?", "opciones": ["A. Molestar a alguien por internet", "B. Hacer tareas", "C. Jugar en línea", "D. Compartir memes"], "correcta": "A. Molestar a alguien por internet" },
  { "tema": "Cibernético", "pregunta": "¿Qué hacer si te amenazan por redes?", "opciones": ["A. Responder igual", "B. Bloquear y denunciar", "C. Cambiar de red", "D. Llorar"], "correcta": "B. Bloquear y denunciar" },
  { "tema": "Sexual", "pregunta": "¿Qué es un delito sexual?", "opciones": ["A. Besar sin permiso", "B. Tocar", "obligar o exponer a contenido sexual", "C. Enviar mensajes", "D. Ser cariñoso"], "correcta": "B. Tocar, obligar o exponer a contenido sexual" },
  { "tema": "Sexual", "pregunta": "¿Es delito pedir fotos íntimas a menores?", "opciones": ["A. No", "B. Solo si se comparten", "C. Sí", "D. Solo si las imprime"], "correcta": "C. Sí" },
  { "tema": "Cibernético", "pregunta": "Si compartes en un grupo de WhatsApp material sexual de una compañera de colegio:", "opciones": ["a) No hay problema legal si el grupo es privado y de confianza", "b) Podrías enfrentar un proceso por delitos contra la libertad, integridad y formación sexual, y pornografía con menores", "c) Solo hay consecuencias si la imagen se viralizó más allá del grupo original", "d) Es una simple falta disciplinaria que solo afecta tu expediente escolar"], "correcta": "b) Podrías enfrentar un proceso por delitos contra la libertad, integridad y formación sexual, y pornografía con menores" },
  { "tema": "Sexual", "pregunta": "Un adolescente que ha sido víctima de abuso sexual:", "opciones": ["a) Está obligado a confrontar a su agresor directamente en el juicio", "b) Debe esperar a ser mayor de edad para denunciar si quiere ser tomado en serio", "c) Tiene derecho a procedimientos especiales que protejan su dignidad, intimidad y eviten su revictimización", "d) Solo puede denunciar a través de sus padres, nunca directamente"], "correcta": "c) Tiene derecho a procedimientos especiales que protejan su dignidad, intimidad y eviten su revictimización" },
  { "tema": "Drogas", "pregunta": "¿Es legal consumir drogas en el colegio?", "opciones": ["A. Sí", "B. Solo marihuana", "C. No", "D. Si el rector lo permite"], "correcta": "C. No" },
  { "tema": "Drogas", "pregunta": "¿Qué hacer si un compañero te ofrece una sustancia?", "opciones": ["A. Probar", "B. Rechazar y pedir ayuda", "C. Guardar para después", "D. Compartir"], "correcta": "B. Rechazar y pedir ayuda" },
  { "tema": "Drogas", "pregunta": "¿Qué consecuencias puede traer el consumo frecuente de drogas?", "opciones": ["A. Felicidad permanente", "B. Problemas de salud", "estudio y ley", "C. Más amigos", "D. Premios escolares"], "correcta": "B. Problemas de salud, estudio y ley" },
  { "tema": "Drogas", "pregunta": "Si te encuentras en una fiesta donde amigos consumen y distribuyen drogas, y la policía realiza un operativo:", "opciones": ["a) No puedes ser investigado si solo estabas presente sin consumir", "b) Podrías enfrentar un proceso por complicidad según el grado de participación, incluso si no consumiste", "c) El sistema de responsabilidad penal para adolescentes no contempla delitos relacionados con drogas", "d) Solo tendrás problemas si eres mayor de 16 años"], "correcta": "b) Podrías enfrentar un proceso por complicidad según el grado de participación, incluso si no consumiste" },
  { "tema": "Drogas", "pregunta": "Un adolescente que consume alcohol o sustancias psicoactivas:", "opciones": ["a) No viola ninguna ley mientras no conduzca vehículos", "b) Está en situación de vulneración de derechos y el Estado debe protegerlo, no penalizarlo", "c) Debe ser inmediatamente recluido en un centro de rehabilitación obligatorio", "d) Solo comete una infracción si lo hace en espacios públicos"], "correcta": "b) Está en situación de vulneración de derechos y el Estado debe protegerlo, no penalizarlo" },
  { "tema": "Drogas", "pregunta": "Si un menor de edad es captado por grupos criminales para vender drogas:", "opciones": ["a) Es plenamente responsable de sus actos independientemente de cómo fue reclutado", "b) Es considerado víctima de utilización para actividades ilícitas, además de su responsabilidad personal", "c) Queda automáticamente excluido de responsabilidad por ser utilizado", "d) Su responsabilidad depende exclusivamente de cuánto dinero ganó con la actividad"], "correcta": "b) Es considerado víctima de utilización para actividades ilícitas, además de su responsabilidad personal" },
  { "tema": "Drogas", "pregunta": "Si un amigo te ofrece una sustancia desconocida en una fiesta, ¿qué deberías hacer?", "opciones": ["A. Probarla solo una vez para ver cómo te sientes.", "B. Decir que no y alejarte de la situación.", "C. Tomarla si todos lo están haciendo.", "D. Guardar un poco para probar después."], "correcta": "B. Decir que no y alejarte de la situación." },
  { "tema": "Maltrato", "pregunta": "¿Qué es el maltrato infantil?", "opciones": ["A. Castigo físico leve", "B. Agresión", "abandono o insultos", "C. Regañar con fuerza", "D. Poner límites"], "correcta": "B. Agresión, abandono o insultos" },
  { "tema": "Maltrato", "pregunta": "¿Qué hacer si un amigo sufre violencia en casa?", "opciones": ["A. Callar", "B. Decirle que aguante", "C. Contar a un adulto o denunciar", "D. Huir con él"], "correcta": "C. Contar a un adulto o denunciar" },
  { "tema": "Maltrato", "pregunta": "¿Qué consecuencias tiene el maltrato reiterado?", "opciones": ["A. Ninguna", "B. Daño emocional y legal", "C. Mejora el comportamiento", "D. Lo vuelve fuerte"], "correcta": "B. Daño emocional y legal" },
  { "tema": "Maltrato", "pregunta": "Si un adolescente es víctima de bullying escolar grave y sistemático:", "opciones": ["a) Debe resolverlo personalmente como parte de su crecimiento", "b) Solo constituye un problema disciplinario interno del colegio", "c) Puede constituir delitos como lesiones personales, injuria, calumnia o discriminación", "d) Es un asunto exclusivamente familiar que no compete a las autoridades"], "correcta": "c) Puede constituir delitos como lesiones personales, injuria, calumnia o discriminación" },
  { "tema": "Penal", "pregunta": "Si un adolescente de 16 años es encontrado culpable de robo con violencia:", "opciones": ["a) Sus antecedentes quedarán en su registro judicial permanente cuando sea adulto", "b) Sus registros son reservados y no constituyen antecedentes penales en su vida adulta", "c) Solo quedará registro por 1 año y luego se borra automáticamente", "d) El juez puede decidir discrecionalmente si quedan o no antecedentes"], "correcta": "b) Sus registros son reservados y no constituyen antecedentes penales en su vida adulta" },
  { "tema": "Penal", "pregunta": "¿Qué tipo de sanción contempla la Ley 1098?", "opciones": ["A. Multa familiar", "B. Medidas socioeducativas", "C. Expulsión del colegio", "D. Aislamiento social"], "correcta": "B. Medidas socioeducativas" },
  { "tema": "Convivencia", "pregunta": "¿Qué conducta afecta la convivencia en el barrio?", "opciones": ["A. Hacer deporte", "B. Ayudar a vecinos", "C. Gritar o pelear en la calle", "D. Recoger basura"], "correcta": "C. Gritar o pelear en la calle" },
  { "tema": "Penal", "pregunta": "¿Qué tipo de delitos cometen con más frecuencia los menores en Colombia?", "opciones": ["A. Homicidio", "B. Hurto", "lesiones y porte de armas", "C. Estafa internacional", "D. Contrabando"], "correcta": "B. Hurto, lesiones y porte de armas" },
  { "tema": "Convivencia", "pregunta": "¿Cuál conducta es sancionada por el Código de Convivencia?", "opciones": ["A. Participar en eventos deportivos", "B. No respetar normas de ruido", "C. Ir a clases", "D. Ayudar a vecinos"], "correcta": "B. No respetar normas de ruido" },
  { "tema": "Maltrato", "pregunta": "Las "barras bravas" o pandillas que involucran a adolescentes en actos violentos:", "opciones": ["a) Están permitidas como expresión cultural si no usan armas de fuego", "b) Solo son ilegales si los integrantes son mayores de 16 años", "c) Pueden configurar diversos delitos como lesiones personales, daño en bien ajeno o concierto para delinquir", "d) Son consideradas simplemente como contravenciones menores"], "correcta": "c) Pueden configurar diversos delitos como lesiones personales, daño en bien ajeno o concierto para delinquir" },
  { "tema": "Convivencia", "pregunta": "Las peleas coordinadas entre adolescentes (las denominadas "vueltas"):", "opciones": ["a) Son simples riñas escolares sin consecuencias legales", "b) Pueden constituir delitos de lesiones personales e incluso tentativa de homicidio", "c) Solo tienen relevancia legal si ocurren dentro de instituciones educativas", "d) Son permitidas si hay consentimiento mutuo entre los participantes"], "correcta": "b) Pueden constituir delitos de lesiones personales e incluso tentativa de homicidio" },
  { "tema": "Convivencia", "pregunta": "Un adolescente que porta un arma blanca (cuchillo, navaja) en el colegio:", "opciones": ["a) No comete ninguna falta si nunca la usa contra otros", "b) Solo viola normas disciplinarias internas del colegio", "c) Puede enfrentar procesos por porte de armas y representar un riesgo para la comunidad educativa", "d) Es legal siempre que sea para su autodefensa"], "correcta": "c) Puede enfrentar procesos por porte de armas y representar un riesgo para la comunidad educativa" },
  { "tema": "Responsabilidad", "pregunta": "¿Cuál es la sanción más grave que puede recibir un menor?", "opciones": ["A. Prisión perpetua", "B. Internamiento hasta 8 años", "C. Multa millonaria", "D. Expulsión escolar"], "correcta": "B. Internamiento hasta 8 años" },
  { "tema": "Penal", "pregunta": "¿Qué pasa si un adolescente comete un delito grave?", "opciones": ["A. Es juzgado como adulto", "B. Recibe una medida pedagógica", "C. Puede ser internado", "D. No le pasa nada"], "correcta": "C. Puede ser internado" },
  { "tema": "Cibernético", "pregunta": "¿Publicar fotos sin permiso puede ser delito?", "opciones": ["A. No", "B. Sí", "C. Solo si se editan", "D. Si son memes"], "correcta": "B. Sí" },
  { "tema": "Penal", "pregunta": "¿Cuál es la pena máxima que puede recibir un adolescente por un delito grave?", "opciones": ["A. 3 años", "B. 5 años", "C. 8 años", "D. 10 años"], "correcta": "C. 8 años" },
  { "tema": "Penal", "pregunta": "Si un adolescente de 15 años comete un homicidio doloso, según la Ley 1098 de 2006 (modificada por la Ley 1453 de 2011):", "opciones": ["a) No puede ser juzgado por ser menor de edad y solo recibirá terapia psicológica", "b) Puede ser condenado como adulto a más de 20 años de prisión en una cárcel regular", "c) Puede ser privado de libertad en un centro de atención especializado por un periodo entre 2 y 8 años", "d) Solo recibe una amonestación y servicio comunitario por ser menor de 16 años"], "correcta": "c) Puede ser privado de libertad en un centro de atención especializado por un periodo entre 2 y 8 años" },
  { "tema": "Penal", "pregunta": "¿Qué ocurre si un adolescente de 17 años es condenado por un delito grave y cumple 18 años durante su sanción?", "opciones": ["a) Es inmediatamente trasladado a una cárcel para adultos", "b) Queda en libertad inmediata por principio de favorabilidad", "c) Continúa en el centro de atención especializado para adolescentes hasta completar su sanción", "d) Su caso debe revisarse nuevamente bajo las leyes para adultos"], "correcta": "c) Continúa en el centro de atención especializado para adolescentes hasta completar su sanción" },
  { "tema": "Penal", "pregunta": "La privación de libertad de un adolescente en el sistema de responsabilidad penal:", "opciones": ["a) Busca principalmente el castigo ejemplarizante para prevenir delitos futuros", "b) Tiene finalidad pedagógica, protectora, educativa y restaurativa, no simplemente punitiva", "c) Es igual a la prisión para adultos pero con menor tiempo de condena", "d) Siempre incluye trabajo forzado como método de rehabilitación"], "correcta": "b) Tiene finalidad pedagógica, protectora, educativa y restaurativa, no simplemente punitiva" },
  { "tema": "Cibernético", "pregunta": "Si un desconocido en línea te pide fotos o información personal, ¿qué es lo más seguro que puedes hacer?", "opciones": ["A. Dárselas si parece amable y confiable.", "B. Bloquearlo y reportarlo a la plataforma o a un adulto responsable.", "C. Quedar en persona para conocerlo mejor.", "D. Seguir conversando hasta que parezca seguro compartir datos."], "correcta": "B. Bloquearlo y reportarlo a la plataforma o a un adulto responsable." },
  { "tema": "Grooming", "pregunta": "Un adulto contacta a una adolescente por redes sociales, finge tener su misma edad y le pide que no le cuente a nadie. Esto puede ser:", "opciones": ["A. Una amistad digital normal.", "B. Parte de un juego en línea.", "C. Grooming, una forma de acoso sexual que pone en riesgo a la menor.", "D. Una broma común entre jóvenes."], "correcta": "C. Grooming, una forma de acoso sexual que pone en riesgo a la menor." },
  { "tema": "Grooming", "pregunta": "¿Qué debes hacer si un desconocido por internet insiste en hablar contigo de temas sexuales?", "opciones": ["A. Seguir la conversación con curiosidad.", "B. No hacer nada y esperar que se aburra.", "C. Detener la conversación, bloquearlo y reportarlo a un adulto o autoridad.", "D. Contarle a tus amigos para que también lo contacten."], "correcta": "C. Detener la conversación, bloquearlo y reportarlo a un adulto o autoridad." },
  { "tema": "Responsabilidad", "pregunta": "¿Desde qué edad un adolescente puede responder penalmente en Colombia?", "opciones": ["A. 12 años", "B. 14 años", "C. 16 años", "D. 18 años"], "correcta": "B. 14 años" },
  { "tema": "Responsabilidad", "pregunta": "¿Qué busca el sistema penal para adolescentes?", "opciones": ["A. Castigar como adultos", "B. Rehabilitar y reeducar", "C. Multar a los padres", "D. Internar indefinidamente"], "correcta": "B. Rehabilitar y reeducar" },
  { "tema": "Responsabilidad", "pregunta": "¿Quién acompaña al menor en el proceso judicial?", "opciones": ["A. Policía", "B. Profesor", "C. Defensor de Familia", "D. Comisaría de Policía"], "correcta": "C. Defensor de Familia" },
  { "tema": "Penal", "pregunta": "¿Los adolescentes tienen derecho a defensa en un proceso penal?", "opciones": ["A. No", "B. Sí", "C. Solo si pagan", "D. Depende del caso"], "correcta": "B. Sí" },
  { "tema": "Penal", "pregunta": "¿Cuál de estos es un derecho del menor infractor?", "opciones": ["A. Ser castigado", "B. Ser oído", "C. Ser retenido sin razón", "D. Ser juzgado como adulto"], "correcta": "B. Ser oído" },
  { "tema": "Convivencia", "pregunta": "¿Qué autoridad puede imponer comparendos a los jóvenes?", "opciones": ["A. Policía", "B. Rector", "C. Alcalde", "D. Fiscal"], "correcta": "A. Policía" },
  { "tema": "Convivencia", "pregunta": "¿Qué tipo de sanciones existen en la Ley 1801?", "opciones": ["A. Prisión", "B. Pedagógicas y económicas", "C. Deportación", "D. Ninguna"], "correcta": "B. Pedagógicas y económicas" },
];

    const canvas = document.getElementById("wheel");
    const ctx = canvas.getContext("2d");
    const result = document.getElementById("result");
    const optionsDiv = document.getElementById("options");
    const winSound = document.getElementById("win-sound");
    const errorSound = document.getElementById("error-sound");
    const spinBtn = document.getElementById("spin");

    let angle = 0;
    let spinning = false;

    function drawWheel() {
      const num = temas.length;
      const anglePerSlice = 2 * Math.PI / num;

      for (let i = 0; i < num; i++) {
        const start = i * anglePerSlice;
        const end = start + anglePerSlice;
        ctx.beginPath();
        ctx.moveTo(200, 200);
        ctx.fillStyle = temas[i].color;
        ctx.arc(200, 200, 200, start, end);
        ctx.lineTo(200, 200);
        ctx.fill();

        ctx.save();
        ctx.translate(200, 200);
        ctx.rotate(start + anglePerSlice / 2);
        ctx.textAlign = "right";
        ctx.fillStyle = "white";
        ctx.font = "bold 16px sans-serif";
        ctx.fillText(temas[i].tema, 170, 10);
        ctx.restore();
      }
    }

    function spinWheel() {
      if (spinning) return;
      spinning = true;
      optionsDiv.innerHTML = "";
      let rotation = Math.random() * 360 + 720;
      angle += rotation;
      canvas.style.transition = "transform 3s ease-out";
      canvas.style.transform = 'rotate(' + angle + 'deg)';

      setTimeout(() => {
        const normalized = angle % 360;
        const slice = Math.floor(temas.length - (normalized / 360) * temas.length) % temas.length;
        const temaSeleccionado = temas[slice].tema;
        const preguntasTema = preguntas.filter(p => p.tema === temaSeleccionado);
        const pregunta = preguntasTema.length > 0 ? preguntasTema[Math.floor(Math.random() * preguntasTema.length)] : preguntas[Math.floor(Math.random() * preguntas.length)];
        mostrarPregunta(pregunta);
        spinning = false;
      }, 3100);
    }

    function mostrarPregunta(pregunta) {
      result.innerText = "Pregunta: " + pregunta.pregunta;
      optionsDiv.innerHTML = "";
      pregunta.opciones.forEach(op => {
        const btn = document.createElement("button");
        btn.className = "option-btn";
        btn.textContent = op;
        btn.onclick = () => {
          if (op === pregunta.correcta) {
            winSound.play();
            alert("¡Correcto! Bien hecho.");
          } else {
            errorSound.play();
            alert("Respuesta incorrecta. Intenta otra vez.");
          }
        };
        optionsDiv.appendChild(btn);
      });
    }

    drawWheel();
    spinBtn.onclick = spinWheel;
  </script>
</body>
</html>
